{% extends "base.html" %} {% block title %}ê²Œì‹œíŒ ê´€ë¦¬ - BO System{% endblock %}
{% block extra_styles %}
<style>
  .form-group {
    margin-bottom: 15px;
    display: flex;
    gap: 10px;
    align-items: center;
  }

  input,
  select {
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
  }

  .btn-create {
    padding: 10px 25px;
    background: #3498db;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
  }

  .badge {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: bold;
  }

  .type-korean {
    background: #e8f4fd;
    color: #2980b9;
  }

  .type-guest {
    background: #fef9e7;
    color: #f1c40f;
  }

  /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
  #editModal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }

  .modal-card {
    background: white;
    padding: 30px;
    border-radius: 12px;
    width: 450px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  }

  .modal-card h3 {
    margin-top: 0;
    color: #2c3e50;
  }

  .modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 25px;
  }

  .btn-cancel {
    padding: 10px 20px;
    border: none;
    cursor: pointer;
    border-radius: 4px;
  }

  .btn-save {
    padding: 10px 20px;
    background: #3498db;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-weight: bold;
  }
</style>
{% endblock %} {% block content %}
<div class="card">
  <h2 style="margin-top: 0">ğŸ› ï¸ ìƒˆ ê²Œì‹œíŒ ìƒì„±</h2>
  <form action="/admin/board/create" method="post">
    <div class="form-group">
      <input
        type="text"
        name="name"
        placeholder="ê²Œì‹œíŒ ì´ë¦„ (ì˜ˆ: ììœ ê²Œì‹œíŒ)"
        required
        style="flex: 2"
      />
      <select name="type" required style="flex: 1">
        <option value="korean">ğŸ“ ì¼ë°˜í˜• (Korean)</option>
        <option value="guestbook">ğŸ’¬ ë°©ëª…ë¡ (Guestbook)</option>
      </select>
      <select name="auth" required style="flex: 1">
        <option value="all">ëˆ„êµ¬ë‚˜ (ë¹„íšŒì› í¬í•¨)</option>
        <option value="member">íšŒì› ì´ìƒ</option>
        <option value="admin">ê´€ë¦¬ì ì „ìš©</option>
      </select>
      <button type="submit" class="btn-create">ê²Œì‹œíŒ ìƒì„±</button>
    </div>
  </form>
</div>

<div class="card">
  <h3>ğŸ“‹ ìš´ì˜ ì¤‘ì¸ ê²Œì‹œíŒ ëª©ë¡</h3>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>ê²Œì‹œíŒ ëª…</th>
        <th>ìœ í˜•</th>
        <th>ì‘ì„± ê¶Œí•œ</th>
        <th>ìƒì„±ì¼</th>
        <th>ê´€ë¦¬</th>
      </tr>
    </thead>
    <tbody>
      {% for b in boards %}
      <tr>
        <td>
          {% if b.type in ['guestbook', 'guest'] or 'ë°©ëª…ë¡' in b.name %}
          <a
            href="/board/{{ b.id }}"
            target="_blank"
            style="color: #e67e22; font-weight: bold; text-decoration: none"
          >
            {{ b.id }} â†—ï¸
          </a>
          {% else %}
          <a
            href="/admin/board/{{ b.id }}/posts"
            style="color: #3498db; font-weight: bold; text-decoration: none"
          >
            {{ b.id }} âš™ï¸
          </a>
          {% endif %}
        </td>
        <td style="font-weight: bold">{{ b.name }}</td>
        <td>
          <span
            class="badge {{ 'type-korean' if b.type == 'korean' else 'type-guest' }}"
          >
            {{ 'ì¼ë°˜í˜•' if b.type == 'korean' else 'ë°©ëª…ë¡' }}
          </span>
        </td>
        <td>
          {% if b.auth == 'all' %}ëˆ„êµ¬ë‚˜ {% elif b.auth == 'member' %}íšŒì› {%
          else %}ê´€ë¦¬ì{% endif %}
        </td>
        <td>{{ b.created_at }}</td>
        <td>
          <button
            onclick="openEditModal('{{ b.id }}', '{{ b.name }}', '{{ b.type }}', '{{ b.auth }}')"
            style="
              color: #3498db;
              background: none;
              border: none;
              cursor: pointer;
              text-decoration: none;
              margin-right: 10px;
              font-size: 14px;
            "
          >
            ì„¤ì •
          </button>

          <a
            href="/admin/board/delete/{{ b.id }}"
            style="color: #e74c3c; text-decoration: none; font-size: 14px"
            onclick="return confirm('ì´ ê²Œì‹œíŒì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ê´€ë ¨ ë°ì´í„°ê°€ ëª¨ë‘ ì‚¬ë¼ì§‘ë‹ˆë‹¤.')"
            >ì‚­ì œ</a
          >
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div id="editModal">
  <div class="modal-card">
    <h3>ğŸ› ï¸ ê²Œì‹œíŒ ì„¤ì • ë³€ê²½</h3>
    <form action="/admin/board/update" method="post">
      <input type="hidden" name="board_id" id="edit_board_id" />

      <div style="margin-bottom: 15px">
        <label style="display: block; margin-bottom: 5px; font-weight: bold"
          >ê²Œì‹œíŒ ì´ë¦„</label
        >
        <input
          type="text"
          name="name"
          id="edit_name"
          required
          style="width: 100%; box-sizing: border-box"
        />
      </div>

      <div style="margin-bottom: 15px">
        <label style="display: block; margin-bottom: 5px; font-weight: bold"
          >ìœ í˜•</label
        >
        <select name="type" id="edit_type" style="width: 100%">
          <option value="korean">ì¼ë°˜ í•œêµ­í˜• (ëª©ë¡í˜•)</option>
          <option value="guestbook">ë°©ëª…ë¡ (ëŒ“ê¸€/ëŒ€ëŒ“ê¸€ ì¤‘ì‹¬)</option>
        </select>
      </div>

      <div style="margin-bottom: 15px">
        <label style="display: block; margin-bottom: 5px; font-weight: bold"
          >ê¶Œí•œ</label
        >
        <select name="auth" id="edit_auth" style="width: 100%">
          <option value="all">ëˆ„êµ¬ë‚˜ (ë¹„íšŒì› í¬í•¨)</option>
          <option value="member">íšŒì› ì´ìƒ</option>
          <option value="admin">ê´€ë¦¬ì ì „ìš©</option>
        </select>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn-cancel" onclick="closeEditModal()">
          ì·¨ì†Œ
        </button>
        <button type="submit" class="btn-save">ë³€ê²½ ì‚¬í•­ ì €ì¥</button>
      </div>
    </form>
  </div>
</div>
{% endblock %} {% block extra_scripts %}
<script>
  function openEditModal(id, name, type, auth) {
    document.getElementById("edit_board_id").value = id;
    document.getElementById("edit_name").value = name;
    document.getElementById("edit_type").value = type;
    document.getElementById("edit_auth").value = auth;
    document.getElementById("editModal").style.display = "flex";
  }

  function closeEditModal() {
    document.getElementById("editModal").style.display = "none";
  }

  window.onclick = function (event) {
    const modal = document.getElementById("editModal");
    if (event.target == modal) {
      closeEditModal();
    }
  };
</script>
{% endblock %}
